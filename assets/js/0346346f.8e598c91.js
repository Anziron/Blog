"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[207],{3255:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>p,contentTitle:()=>m,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>s});const o=JSON.parse('{"id":"model-application/langchain/core-concepts","title":"Core\u6982\u5ff5\uff1aChain/Memory/Prompt","description":"LangChain\u6846\u67b6\u7684\u6838\u5fc3\u6982\u5ff5\u4e3b\u8981\u5305\u62ecChain\u3001Memory\u548cPrompt\uff0c\u8fd9\u4e9b\u662f\u6784\u5efaLLM\u5e94\u7528\u7684\u57fa\u7840\u6784\u5efa\u5757\u3002","source":"@site/docs/model-application/langchain/core-concepts.md","sourceDirName":"model-application/langchain","slug":"/model-application/langchain/core-concepts","permalink":"/docs/model-application/langchain/core-concepts","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Core\u6982\u5ff5\uff1aChain/Memory/Prompt"},"sidebar":"tutorialSidebar","previous":{"title":"LangChain","permalink":"/docs/model-application/langchain/"},"next":{"title":"RAG \u7cfb\u7edf\u6784\u5efa","permalink":"/docs/model-application/langchain/rag-system"}}');var t=r(4848),a=r(8453);const i={sidebar_position:1,title:"Core\u6982\u5ff5\uff1aChain/Memory/Prompt"},m="Core\u6982\u5ff5",p={},s=[{value:"Chain\uff08\u94fe\uff09",id:"chain\u94fe",level:2},{value:"Memory\uff08\u8bb0\u5fc6\uff09",id:"memory\u8bb0\u5fc6",level:2},{value:"Prompt\uff08\u63d0\u793a\uff09",id:"prompt\u63d0\u793a",level:2},{value:"\u7ec4\u5408\u4f7f\u7528",id:"\u7ec4\u5408\u4f7f\u7528",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"core\u6982\u5ff5",children:"Core\u6982\u5ff5"})}),"\n",(0,t.jsx)(e.p,{children:"LangChain\u6846\u67b6\u7684\u6838\u5fc3\u6982\u5ff5\u4e3b\u8981\u5305\u62ecChain\u3001Memory\u548cPrompt\uff0c\u8fd9\u4e9b\u662f\u6784\u5efaLLM\u5e94\u7528\u7684\u57fa\u7840\u6784\u5efa\u5757\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"chain\u94fe",children:"Chain\uff08\u94fe\uff09"}),"\n",(0,t.jsx)(e.p,{children:"Chain\u662fLangChain\u4e2d\u6700\u57fa\u672c\u7684\u62bd\u8c61\u4e4b\u4e00\uff0c\u5b83\u5c06\u591a\u4e2a\u7ec4\u4ef6\uff08\u5982LLM\u3001Prompt\u6a21\u677f\u3001\u5176\u4ed6Chain\u7b49\uff09\u4e32\u8054\u8d77\u6765\uff0c\u5f62\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u5904\u7406\u6d41\u7a0b\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'from langchain.chains import LLMChain\r\nfrom langchain.llms import OpenAI\r\nfrom langchain.prompts import PromptTemplate\r\n\r\n# \u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684Chain\r\nprompt = PromptTemplate(\r\n    input_variables=["product"],\r\n    template="\u4e3a{product}\u5199\u4e00\u4e2a\u7b80\u77ed\u7684\u5e7f\u544a\u8bed\u3002",\r\n)\r\nllm = OpenAI(temperature=0.7)\r\nchain = LLMChain(llm=llm, prompt=prompt)\r\n\r\n# \u4f7f\u7528Chain\r\nresult = chain.run(product="\u4e00\u6b3e\u667a\u80fd\u624b\u673a")\r\nprint(result)\n'})}),"\n",(0,t.jsx)(e.h2,{id:"memory\u8bb0\u5fc6",children:"Memory\uff08\u8bb0\u5fc6\uff09"}),"\n",(0,t.jsx)(e.p,{children:"Memory\u5141\u8bb8Chain\u5728\u591a\u8f6e\u4ea4\u4e92\u4e2d\u4fdd\u6301\u72b6\u6001\uff0c\u8fd9\u5bf9\u4e8e\u6784\u5efa\u5bf9\u8bdd\u5e94\u7528\u81f3\u5173\u91cd\u8981\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'from langchain.chains import ConversationChain\r\nfrom langchain.memory import ConversationBufferMemory\r\n\r\n# \u521b\u5efa\u5e26\u6709\u8bb0\u5fc6\u529f\u80fd\u7684\u5bf9\u8bddChain\r\nmemory = ConversationBufferMemory()\r\nconversation = ConversationChain(\r\n    llm=OpenAI(temperature=0.7),\r\n    memory=memory,\r\n    verbose=True\r\n)\r\n\r\n# \u8fdb\u884c\u591a\u8f6e\u5bf9\u8bdd\r\nresponse1 = conversation.predict(input="\u4f60\u597d\uff01")\r\nresponse2 = conversation.predict(input="\u6211\u60f3\u4e86\u89e3\u673a\u5668\u5b66\u4e60\u3002")\n'})}),"\n",(0,t.jsx)(e.h2,{id:"prompt\u63d0\u793a",children:"Prompt\uff08\u63d0\u793a\uff09"}),"\n",(0,t.jsx)(e.p,{children:"Prompt\u662f\u4e0eLLM\u4ea4\u4e92\u7684\u6587\u672c\u6307\u4ee4\uff0cLangChain\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u5de5\u5177\u6765\u521b\u5efa\u548c\u7ba1\u7406\u63d0\u793a\u6a21\u677f\u3002"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'from langchain.prompts import ChatPromptTemplate, HumanMessagePromptTemplate\r\n\r\n# \u521b\u5efa\u4e00\u4e2a\u804a\u5929\u63d0\u793a\u6a21\u677f\r\nhuman_template = "\u56de\u7b54\u4ee5\u4e0b\u95ee\u9898: {question}"\r\nhuman_message_prompt = HumanMessagePromptTemplate.from_template(human_template)\r\nchat_prompt = ChatPromptTemplate.from_messages([human_message_prompt])\r\n\r\n# \u683c\u5f0f\u5316\u63d0\u793a\r\nformatted_prompt = chat_prompt.format_prompt(question="\u4ec0\u4e48\u662f\u673a\u5668\u5b66\u4e60\uff1f").to_messages()\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u7ec4\u5408\u4f7f\u7528",children:"\u7ec4\u5408\u4f7f\u7528"}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u4e09\u4e2a\u6838\u5fc3\u6982\u5ff5\u901a\u5e38\u4e00\u8d77\u4f7f\u7528\uff0c\u6784\u5efa\u5f3a\u5927\u7684LLM\u5e94\u7528\uff1a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'from langchain.chains import ConversationChain\r\nfrom langchain.memory import ConversationBufferMemory\r\nfrom langchain.prompts import PromptTemplate\r\n\r\n# \u81ea\u5b9a\u4e49\u63d0\u793a\u6a21\u677f\r\ntemplate = """\r\n\u4ee5\u4e0b\u662f\u4eba\u7c7b\u548cAI\u52a9\u624b\u4e4b\u95f4\u53cb\u597d\u7684\u5bf9\u8bdd\u3002\r\nAI\u52a9\u624b\u4e50\u4e8e\u52a9\u4eba\u3001\u6709\u521b\u610f\u3001\u806a\u660e\u800c\u4e14\u975e\u5e38\u53cb\u597d\u3002\r\n\r\n\u5f53\u524d\u5bf9\u8bdd:\r\n{history}\r\n\u4eba\u7c7b: {input}\r\nAI: \r\n"""\r\n\r\nprompt = PromptTemplate(input_variables=["history", "input"], template=template)\r\nmemory = ConversationBufferMemory(return_messages=True)\r\n\r\nconversation = ConversationChain(\r\n    llm=OpenAI(temperature=0.7),\r\n    prompt=prompt,\r\n    memory=memory,\r\n    verbose=True\r\n)\n'})})]})}function c(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>m});var o=r(6540);const t={},a=o.createContext(t);function i(n){const e=o.useContext(a);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function m(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),o.createElement(a.Provider,{value:e},n.children)}}}]);